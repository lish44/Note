# const

### cå’Œc++çš„const

+ å¯¹äºc,åœ¨å±€éƒ¨æ˜¯ä¼ªå¸¸é‡ï¼Œä¼šåˆ†é…å†…å­˜

```c
const int m_a = 10;
int* ptr = (int*)&m_a;

*ptr = 20;//å¯ä»¥ä¿®æ”¹
int arr[m_a];//æŠ¥é”™ 
```

+ å¯¹äºc++æ˜¯çœŸç”·äººï¼Œä¸ä¼šåˆ†é…å†…å­˜ï¼Œå­˜åœ¨ç¬¦å·è¡¨é‡Œ

```c++
const int m_a = 10;
int* ptr = (int*)&m_a;

*ptr = 20;      //ä¸èƒ½ä¿®æ”¹
int arr[m_a];   //ä¸æŠ¥é”™ 
```


+ cä¸­constæ˜¯é»˜è®¤å¤–éƒ¨é“¾æ¥,c++æ˜¯å†…éƒ¨

```c
//test.c
const int m_a;
//main
extern const int m_a;//å‘Šè¯‰ç¼–è¯‘å™¨m_aåœ¨å¤–éƒ¨
```
### constå†…å­˜åˆ†é…æƒ…å†µ
+ å–åœ°å€ ä¼šåˆ†é…ä¸´æ—¶å†…å­˜
```c++
const int m_a = 10;
int* ptr = (int*)&m_a;//åˆ†é…ä¸´æ—¶å†…å­˜
```
ç¼–è¯‘å™¨ä¼šåšå¦‚ä»¥ä¸‹æ“ä½œ
`int temp = m_a;`  tempæœ‰å†…å­˜

`int* ptr = (int*)&temp;`  ptræŒ‡å‘ä¸´æ—¶ç©ºé—´ å¯¹ptrçš„æ“ä½œéƒ½æ˜¯å¯¹ä¸´æ—¶ç©ºé—´çš„

+ åŠ extern ä¼šåˆ†é…å†…å­˜
```c++
extern const int m_a;
```

+ ç”¨ **æ™®é€š** å˜é‡ åˆå§‹åŒ– constå˜é‡ ä¼šåˆ†é…å†…å­˜
```c++
int a = 10;
const int b = a;//åˆ†é…å†…å­˜
int* p = (int*)&b;
*p = 99;
cout<<b<<endl;//99
```
+ è‡ªå®šä¹‰æ•°æ®ç±»å‹åŠ constä¼šåˆ†é…å†…å­˜ï¼ˆä¸å¸¸ç”¨ï¼‰

### å¼•ç”¨å’Œconst 
+ å¸¸é‡çš„å¼•ç”¨ (reference to const)

    > å¯ä»¥æŠŠå¼•ç”¨ç»‘å®šåˆ°constå¯¹è±¡ä¸Šï¼Œç§°ä¸ºå¯¹å¸¸é‡çš„å¼•ç”¨
    
    > ä¿®é¥°çš„æ˜¯ **å¼•ç”¨å¯¹è±¡** ä¸èƒ½å˜ æˆ–å« **å¼•ç”¨å˜é‡** å¦‚ğŸ‘‡`&c`

+ å¯ä»¥ç”¨ **éå¸¸é‡** æˆ– **å¸¸é‡** æˆ– **å­—é¢å€¼å¸¸é‡** åˆå§‹åŒ– **å¸¸é‡å¼•ç”¨**
```c++
int a = 10;
const int b = 20;

const int &c = a;   //éå¸¸é‡
const int &d = b;   //å¸¸é‡
const int &e = 30;  //å­—é¢å€¼å¸¸é‡
//main
c = 40;//å¯¹b c d eéƒ½ä¸èƒ½è¿›è¡Œä¿®æ”¹
```
+ ä¸å¯ä»¥ç”¨ **å¸¸é‡å¯¹è±¡** åˆå§‹åŒ– **éå¸¸é‡å¼•ç”¨**
```c++
int &f = c;//æŠ¥é”™--è¯•å›¾è®©éå¸¸é‡å¼•ç”¨æŒ‡å‘å¸¸é‡å¯¹è±¡
```
### æŒ‡é’ˆå’Œconst
+ æŒ‡å‘å¸¸é‡çš„æŒ‡é’ˆ (pointer to const)
    > ä¿®é¥°çš„æ˜¯æŒ‡é’ˆ **æ‰€æŒ‡çš„å¯¹è±¡** ä¸èƒ½å˜
```c++
int a = 10, b = 20;
const int* ptr = &a;
//*ptr = 30;//âŒ--æŒ‡å‘çš„å¯¹è±¡ä¸èƒ½è¢«ä¿®æ”¹
ptr = &b;   //âœ”ï¸--æŒ‡é’ˆæœ¬èº«å¯ä»¥ä¿®æ”¹
cout<<*ptr; //20
```

+ å¸¸é‡æŒ‡é’ˆ (const pointer)
    > ä¿®é¥°çš„æ˜¯ **æŒ‡é’ˆ** ä¸èƒ½å˜
```c++
int a = 10, b = 20;
int *const ptr = &a;
*ptr = 30;  //âœ”ï¸
ptr = &b;   //âŒ
```

+ æŒ‡å‘ **å¸¸é‡å¯¹è±¡** çš„ **å¸¸é‡æŒ‡é’ˆ**
    > ä¿®é¥°çš„ä¸œè¥¿ å…¨ ä¸èƒ½æ”¹
```c++
int a = 10, b = 20;
const int* const ptr = &a;
*ptr = 30;  //âŒ
ptr = &b;   //âŒ
```



