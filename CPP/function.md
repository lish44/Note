# å‡½æ•°

## æŒ‡é’ˆä½œä¸ºå‡½æ•°å‚æ•°

+ åœ¨è°ƒç”¨æ—¶
+ å®å‚å°†ä»¥ **å€¼** ä¼ é€’ç»™å½¢å‚ (å‹æ ˆ å‡½æ•°æ‰§è¡Œå®Œåå‡ºæ ˆï¼‰
+ å®å‚å½¢å‚åœ°å€**ç›¸åŒ** ,æŒ‡å‘åŒä¸€ç©ºé—´
+ å½¢å‚æ”¹å˜ä¼šå½±å“å®å‚æŒ‡é’ˆæ‰€æŒ‡å‘çš„æ•°æ®å€¼

## thisæŒ‡é’ˆ
+ ä¼šé»˜è®¤åœ¨æ„é€ å‡½æ•°å‚æ•°åˆ—è¡¨é‡Œæ·»åŠ 
```c++
class A {
public:
    int m_a = 10;
    A (/* A* this, */int m_a){//ç¼–è¯‘å™¨è‡ªåŠ¨æ·»åŠ thisï¼Œè°è°ƒç”¨thiså°±æŒ‡å‘è°
        this->m_a = m_a;
    }
};

void main () {
    A a1(99);//æ­¤æ—¶thisæŒ‡å‘a1å¯¹è±¡ï¼Œa1å¯¹è±¡çš„åœ°å€èµ‹å€¼ç»™äº†thisæŒ‡é’ˆ,this = &a1ã€‚
}
```
+ è¿”å›å¯¹è±¡æœ¬èº«
```c++
A& foo (int m_a) {
    this->m_a += m_a;
    return *this;
}
```
> thisæŒ‡å‘è°ƒç”¨è€…ï¼Œ*thisä»£è¡¨è°ƒç”¨è€…æœ¬èº«ï¼Œè¿”å›å€¼ä¸ºç±»å‹å¼•ç”¨ï¼ˆå¯ä»¥.å‡ºæ¥ï¼Œè¿”å›åå½“å¯¹è±¡ä½¿ç”¨ï¼Œæ­¤æ—¶è¿”å›çš„æ˜¯è°ƒç”¨è€…æœ¬èº«ï¼‰

## æŒ‡é’ˆå‡½æ•°
+ è¿”å› **æŒ‡é’ˆ** çš„ å‡½æ•° ï¼ˆæ˜¯ä¸ªå‡½æ•°ï¼ï¼‰
> å¯ä»¥ç”¨ä½œäºè¿”å›æ•°ç»„æŸä¸€ä½
```c++
int arr[]{1,2,3};
int* foo (int* ptr){
    return &ptr[2];
}
//main
cout << *foo(arr);// 3
```

## å‡½æ•°æŒ‡é’ˆ
+ æŒ‡å‘ **å‡½æ•°** çš„ æŒ‡é’ˆ (æ˜¯ä¸ªæŒ‡é’ˆï¼ï¼‰
    > ç¨‹åºç¼–è¯‘æ—¶ï¼Œå‡½æ•°éƒ½æœ‰ä¸ªå…¥å£ï¼Œæ¯æ¬¡è°ƒç”¨å‡½æ•°å°±ä¼šæ‰¾è¿™ä¸ªå…¥å£ï¼Œå…¥å£å°±æ˜¯ä¸ªåœ°å€ï¼Œå‡½æ•°æŒ‡é’ˆå°±æ˜¯å­˜çš„è¿™ä¸ªåœ°å€

+ å½¢å¼
    > `ret (*ptr)(args,args1,...);`

    > `ret` ä»£è¡¨è¿”å›å€¼ç±»å‹

    > `(*ptr)` æŒ‡é’ˆåï¼Œæ˜¯ä¸ªæ•´ä½“ï¼Œä»£è¡¨æŒ‡å‘æŸä¸ªå‡½æ•°

    > `(args,args1,...)` å½¢å‚åˆ—è¡¨
```c++
int foo (int a, int b) { reutrn a + b; }

void main () {
    //å‡½æ•°æŒ‡é’ˆçš„ç­¾åå¿…é¡»å’ŒæŒ‡å‘çš„å‡½æ•°ç­¾åç›¸åŒ
    
    int (*ptr)(int,int);        // int--è¿”å›ç±»å‹ ï¼ˆ*ptrï¼‰--æŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆ ï¼ˆint,intï¼‰-- å‚æ•°çš„ç±»å‹åŒ¹é…
    
    //int (*ptr)(int,int) = foo;//ä¸‹ä¸‰è¡Œç­‰ä»·
    //ptr = foo;                //å¯¹å‡½æ•°åå–åœ°å€å’Œä½¿ç”¨å‡½æ•°åä¸€æ ·çš„
    ptr = &foo;
    
    cout << (*ptr)(10,20);      // æ‰“å°30
    cout << foo(10,20);         // å’Œä¸Šè¡Œç­‰ä»·ï¼Œå‡½æ•°åè¢«ç¼–è¯‘æˆ–å…¶å®å°±æ˜¯åœ°å€
}
```

## å‡½æ•°æŒ‡é’ˆæ•°ç»„
+ å­˜ **å‡½æ•°æŒ‡é’ˆ** çš„ æ•°ç»„
    > `ret (*ptr[c])(args,args1,...);` å’ŒğŸ‘†å·®ä¸å¤šï¼Œåªä¸è¿‡å¤šä¸ª`[c]`,pträ»æŒ‡é’ˆå˜æˆæ•°ç»„
    
    > `[c]` å…¶ä¸­cä»£è¡¨æ•°ç»„å®¹é‡
    ```c++
    //ptræ˜¯æ•°ç»„åï¼Œæ•°ç»„å¤§å°ä¸º2ã€‚ï¼ˆintï¼Œintï¼‰å‡½æ•°å‚æ•°åˆ—è¡¨ã€‚intä»£è¡¨å‡½æ•°è¿”å›å€¼
    int (*ptr[2])(int,int);

    int Add (int a, int b){ return a + b; }
    int Sub (int a, int b){ return a - b; }
    
    ptr[0] = Add;//é€šè¿‡è¿™ä¸ªè¡¨è¾¾å¼ï¼ŒæŠŠå‡½æ•°çš„åœ°å€èµ‹å€¼ç»™æ•°ç»„ç¬¬ä¸€ä½
    ptr[1] = &Sub;//ä¸ä¸Šè¡Œç­‰ä»·
    
    cout << ptr[0](10,20) << endl;      //ç­‰ä»·(*ptr)(10,20)
    cout << (*(ptr+1))(99,1) << endl;   //ç­‰ä»·ptr[1](99,1)
    ```
    åˆå§‹åŒ–åˆ—è¡¨
    
    `int (*ptr[2])(int,int){Add,Div};` å’ŒğŸ‘†èµ‹å€¼ç­‰ä»·
## å›è°ƒå‡½æ•°
+ å°†å‡½æ•°ä½œä¸ºå‚æ•°
```c++
int Add (int a, int b){ return a + b; }
int Sub (int a, int b){ return a - b; }

int CallBack(int a, int b, int (*ptr)(int,int)){ 

    return ptr(a,b);
}
//main
cout << CallBack(20, 10, Add);// æ‰“å°30
cout << CallBack(20, 10, Sub);// æ‰“å°10
```

## ç»•è¿‡privateæ§åˆ¶æƒé™
```c++
class A {
private:
    int m_a = 10
    int m_b = 20;
public:
    int Getm_a(){ return m_a; }
    int Getm_b(){ return m_b; }
};
//main
A a;
*((int*)&a) = 99;           //m_aèµ‹å€¼ä¸º99
((int*)&a)[0] = 88;         //m_aèµ‹å€¼ä¸º88
cout << a.Getm_a() << endl; //88

*(((int*)&a) + 1) = 77;     //m_bèµ‹å€¼ä¸º77
((int*)&a)[1] = 66;         //m_bèµ‹å€¼ä¸º66
cout << a.Getm_b() << endl; //66
```
> `*((int*)&a)` è§£æ

> `&a` å‡½æ•°æŒ‡é’ˆ

> `(int*)&a` å¼ºè½¬ä¸º4å­—èŠ‚å¯»å€ç©ºé—´çš„æŒ‡é’ˆ,ç°åœ¨æŒ‡é’ˆå­˜çš„åœ°å€æ˜¯ç¬¬ä¸€ä¸ªå˜é‡m_açš„åœ°å€

>`*( (int*)&a )` è§£å¼•ç”¨åï¼Œç°åœ¨ä»£è¡¨m_aå®é™…å†…å®¹

> æ‰€ä»¥`((int*)&a)[0]`ç­‰ä»·`*((int*)&a)` 

> `((int*)&a)[0]` å¯ä»¥ç†è§£ä¸º`ptr[0]`,ptrå°±æ˜¯æŒ‡é’ˆï¼Œå› ä¸ºæ˜¯æŒ‡é’ˆæ‰€ä»¥ä¹Ÿå¯ä»¥å½“åšæ•°ç»„æ¥ç”¨ï¼Œæ•°ç»„ç¬¬ä¸€ä½å­˜çš„å°±æ˜¯m_aï¼Œç¬¬äºŒä½å­˜çš„å°±æ˜¯m_b;

## å‡½æ•°åæ˜¯åœ°å€ç  - - ä¸æ˜¯
> å‡½æ•°åå¹¶ä¸æ˜¯å‡½æ•°åœ°å€çš„ä»£è¡¨ï¼Œè¿™ç§è¯¯è§£ä¸æ•°ç»„åå°±æ˜¯æŒ‡é’ˆä¸€æ ·çŠ¯äº†ç›¸åŒçš„é”™è¯¯ã€‚å‡½æ•°åæ˜¯å‡½æ•°å®ä½“çš„ä»£è¡¨ï¼Œä¸æ˜¯åœ°å€çš„ä»£è¡¨ï¼Œå½“ç„¶ï¼Œä½ é©¬ä¸Šå°±ä¼šæœ‰ç–‘é—®ï¼Œå¹³æ—¶æˆ‘ä»¬ä¸éƒ½æ˜¯æŠŠå‡½æ•°åä½œä¸ºå‡½æ•°çš„åœ°å€å—ï¼Ÿæ˜¯çš„ï¼Œæˆ‘å¯ä»¥å‘Šè¯‰ä½ ï¼Œå‡½æ•°åå¯ä»¥ä½œä¸ºå‡½æ•°çš„åœ°å€ï¼Œä½†æ˜¯ï¼Œç»å¤§å¤šæ•°äººéƒ½å¿½ç•¥äº†ä¸€ä¸ªæ¡ä»¶ï¼Œä»å‡½æ•°åˆ°æŒ‡é’ˆçš„éšå¼è½¬æ¢æ˜¯å‡½æ•°å **åœ¨è¡¨è¾¾å¼ä¸­** çš„è¡Œä¸ºï¼Œå°±æ˜¯è¯´ï¼Œè¿™ä¸ªè½¬æ¢ä»…åœ¨è¡¨è¾¾å¼ä¸­æ‰ä¼šå‘ç”Ÿï¼Œè¿™ä»…æ˜¯å‡½æ•°åä¼—å¤šæ€§è´¨ä¸­çš„ä¸€ä¸ªï¼Œè€Œéæœ¬è´¨ï¼Œå‡½æ•°åçš„æœ¬è´¨å°±æ˜¯å‡½æ•°å®ä½“çš„ä»£è¡¨ã€‚

> åˆ°äº†C++ï¼Œç”±äºC++è§„å®šï¼Œéé™æ€æˆå‘˜å‡½æ•°çš„å·¦å€¼ä¸å¯è·å¾—ï¼Œå› æ­¤éé™æ€æˆå‘˜å‡½æ•°ä¸å­˜åœ¨éšå¼å·¦å€¼è½¬æ¢ï¼Œå³ä¸å­˜åœ¨åƒå¸¸è§„å‡½æ•°é‚£æ ·çš„ä»å‡½æ•°åˆ°æŒ‡é’ˆçš„éšå¼è½¬æ¢ï¼Œæ‰€ä»¥å¿…é¡»åœ¨éé™æ€æˆå‘˜å‡½æ•°å‰ä½¿ç”¨&æ“ä½œç¬¦æ‰èƒ½è·å¾—åœ°å€ã€‚

é“¾æ¥ï¼šhttps://www.jianshu.com/p/215bef2208c7

# å‡½æ•°å‚æ•°

> å½“å‡½æ•°æ— éœ€ä¿®æ”¹å¼•ç”¨å½¢å‚çš„å€¼æ—¶ï¼Œæœ€å¥½å£°æ˜æˆå¸¸é‡å¼•ç”¨
--------
### æ•°ç»„å½¢å‚
+ æ ‡å‡†åº“è§„èŒƒ
```c++
void Print (const int* begin, const int* end){
    while (begin != end)
        cout<< *begin++ <<endl;
}
//main
int arr[]{1,2,3};
Print(begin(arr), end(arr));

auto len = end(arr) - begin(arr);//3 
```
> `begin` è¿”å›æŒ‡å‘é¦–å…ƒç´ çš„æŒ‡é’ˆ

> `end` è¿”å›æŒ‡å‘å°¾å…ƒç´ çš„ä¸‹ä¸€ä¸ªå…ƒç´ çš„æŒ‡é’ˆ

>`len` ç±»å‹æ˜¯`ptrdiff_t` å’Œ `size_t` ä¸€æ ·æ˜¯ä¸€ç§æ ‡å‡†åº“ç±»å‹ï¼Œå®šä¹‰åœ¨cstddefå¤´æ–‡ä»¶ä¸­ï¼Œæ˜¯ä¸€ç§å’Œæœºå™¨ç›¸å…³çš„ç±»å‹

+ æ•°ç»„å¼•ç”¨å½¢å‚
```c++
void Print(int (&arr)[3]) {//é™åˆ¶äº†æ•°ç»„å¤§å¿…é¡»ä¸º3
    for(auto temp : arr){
        cout << temp <<endl;
    }
}
```
> å¿…é¡»åŠ `( )`ï¼Œå¦‚æœä¸åŠ å°±æŠŠarrå£°æ˜æˆäº†å¼•ç”¨çš„æ•°ç»„ 

# å‡½æ•°è¿”å›å€¼
> è¿”å›ä¸€ä¸ªå€¼çš„æ–¹å¼ï¼Œå’Œåˆå§‹åŒ–ä¸€ä¸ªå˜é‡æˆ–å½¢å‚ä¸€æ¨¡ä¸€æ ·

> è¿”å›çš„å€¼ç”¨äºåˆå§‹åŒ–è°ƒç”¨ç‚¹çš„ä¸€ä¸ªä¸´æ—¶é‡ï¼Œè¯¥é›¶æ—¶é‡å°±æ˜¯è°ƒç”¨ç»“æœ




